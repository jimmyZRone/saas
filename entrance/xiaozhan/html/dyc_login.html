<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="apple-touch-fullscreen" content="YES">
		<meta name="format-detection" content="telephone=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta http-equiv="Expires" content="-1">
		<meta http-equiv="pragram" content="no-cache">
		<meta name="viewport" content="width=640, user-scalable=no">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title>手机动态码登录</title>
		<link rel="stylesheet" type="text/css" href="../css/base.css"/>
		<link rel="stylesheet" type="text/css" href="../css/common.css"/>
	</head>
	<body>
		<div class="main">
			<nav id="nav">
				<a href="javascript:history.go(-1)" class="btn back"><em></em><span>返回</span></a>
				<h1>登录</h1>
				<a href="#" class="nav-register">注册</a>
			</nav>
			
			<h4 class="register-title"></h4>
			<div class="login-content login-dtm-content">
				<ul>
					<li>
						<input type="text" name="phone" id="phone" placeholder="请输入手机号" nullmsg="请输入手机号" errormsg="手机号格式错误"/>
					</li>
					<li>
						<input type="text" name="info-dtm" id="info-dtm" class="fl" placeholder="请输入动态码" nullmsg="请输入动态码" errormsg="动态码错误"/>
						<a href="javascript:;" class="fr get-dtm">获取动态码</a>
					</li>
				</ul>
				
				<div class="submitForm">
					<a href="#">登陆</a>
				</div>
				<div class="login-other">
					<span class="fl"><a href="reetr_pass.html">忘记密码？</a></span>
					<span class="fr"><a href="dyc_login.html">手机动态码登录</a></span>
				</div>
			</div>
			<footer>
				<p class="fl">&copy;九猪<span class="p">版权所有</span></p>
				<p class="fr"><a href="#"><i></i>申请小站</a></p>
			</footer>
		</div>
	</body>
	<script type="text/javascript" src="../js/zepto.min.js"></script>
    <script type="text/javascript" src="../js/base.js"></script>
    <script type="text/javascript">
    	var login = {
    		checkphone:function(obj){
    			var teg = /^1\d{10}$/;
    			var _this = obj;
    			var val = $.trim(_this.val());
    			var nullmsg = _this.attr("nullmsg");
    			var errormsg = _this.attr("errormsg");
    			if(val == ""){
    				L.dialog._create({
						msg:nullmsg	
					});
					_this.addClass("haswrong");
					return false;
    			}else if(teg.test(val)){
    				L.dialog._create({
						msg:errormsg	
					});
					_this.addClass("haswrong");
					return false;
    			}else{
    				_this.removeClass("haswrong");
    			}
    		},
    		clickdtbtn:function(obj){
    			if(obj.hasClass("stopclick")) return false;
    			var timer = null; //计时器
    			var time = 60;   //倒计时初始值
    			clearInterval(timer);
    			timer = setInterval(function(){
    				obj.text("倒计时："+time);
    				time--;
    				if(time < 0){
    					clearInterval(timer);
    					obj.removeClass("stopclick").text("获取动态码");
    				}
    			},1000);
    			
    		},
    		init:function(){
    			var that = this;
    			$(".get-dtm").off("tap").on("tap",function(){
    				that.clickdtbtn($(this));
    			});
    		}
    	}
    	$(document).ready(function(){
    		login.init();
    	});
    </script>
</html>

